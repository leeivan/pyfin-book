# 第3章 程序控制结构与金融逻辑（章节文档）

## 前言

本章定位：本章从“静态计算”升级到“可决策、可迭代计算”，让程序开始具备金融业务逻辑能力。
本章按照“核心概念建立 -> 方法机制理解 -> 场景化实现 -> 实验巩固 -> 总结检查”的路径展开，确保读者从知识理解过渡到稳定实践。

目录导读：
1. 条件语句与风险判断
2. 循环结构与分期计算
3. 嵌套结构与规则实现
4. 案例：贷款还款计划表生成
5. 实验与实践建议
6. 本章小结与学习检查

## 1. 条件语句与风险判断

本节聚焦“条件语句与风险判断”，从概念理解、实现路径与常见误区三个层面展开，为后续应用建立稳定基础。

### 1.1 核心概念与金融语义
- 使用 `if/elif/else` 判断风险等级、信用评分区间、是否触发风控规则。
- 明确该主题在本章任务链中的输入、处理与输出关系。
- 用最小示例验证概念是否可执行，而非仅停留在定义层。

### 1.2 方法步骤与实现要点
- 引入边界值思维，例如“等于临界值时如何处理”。
- 说明变量命名、代码拆分和结果记录的最小规范。
- 强调先验证正确性，再逐步优化结构和可读性。

### 1.3 常见误区与实践提示
- 展示错误条件顺序导致的误判问题。
- 区分“程序能运行”与“业务解释正确”两类不同的完成标准。
- 在每次运行后记录关键输入输出，便于复查与复现。

## 2. 循环结构与分期计算

本节聚焦“循环结构与分期计算”，从概念理解、实现路径与常见误区三个层面展开，为后续应用建立稳定基础。

### 2.1 核心概念与金融语义
- 使用 `for` 进行定期迭代，如按月更新余额。
- 明确该主题在本章任务链中的输入、处理与输出关系。
- 用最小示例验证概念是否可执行，而非仅停留在定义层。

### 2.2 方法步骤与实现要点
- 使用 `while` 处理“满足条件前持续计算”的场景。
- 说明变量命名、代码拆分和结果记录的最小规范。
- 强调先验证正确性，再逐步优化结构和可读性。

### 2.3 常见误区与实践提示
- 说明无限循环风险与终止条件设计。
- 区分“程序能运行”与“业务解释正确”两类不同的完成标准。
- 在每次运行后记录关键输入输出，便于复查与复现。

## 3. 嵌套结构与规则实现

本节聚焦“嵌套结构与规则实现”，从概念理解、实现路径与常见误区三个层面展开，为后续应用建立稳定基础。

### 3.1 核心概念与金融语义
- 在循环中加入条件判断，实现“不同月份不同费率”的规则。
- 明确该主题在本章任务链中的输入、处理与输出关系。
- 用最小示例验证概念是否可执行，而非仅停留在定义层。

### 3.2 方法步骤与实现要点
- 引入多条件组合逻辑（与、或、非）表达复杂业务约束。
- 说明变量命名、代码拆分和结果记录的最小规范。
- 强调先验证正确性，再逐步优化结构和可读性。

### 3.3 常见误区与实践提示
- 强调规则可读性与注释规范。
- 区分“程序能运行”与“业务解释正确”两类不同的完成标准。
- 在每次运行后记录关键输入输出，便于复查与复现。

## 4. 案例：贷款还款计划表生成

本节聚焦“案例：贷款还款计划表生成”，从概念理解、实现路径与常见误区三个层面展开，为后续应用建立稳定基础。

### 4.1 核心概念与金融语义
- 输入贷款本金、年利率、期限、还款方式。
- 明确该主题在本章任务链中的输入、处理与输出关系。
- 用最小示例验证概念是否可执行，而非仅停留在定义层。

### 4.2 方法步骤与实现要点
- 输出每期应还本金、利息、剩余本金。
- 说明变量命名、代码拆分和结果记录的最小规范。
- 强调先验证正确性，再逐步优化结构和可读性。

### 4.3 常见误区与实践提示
- 对比“等额本息”和“等额本金”结构差异（可先实现一种，再扩展）。
- 区分“程序能运行”与“业务解释正确”两类不同的完成标准。
- 在每次运行后记录关键输入输出，便于复查与复现。

## 5. 实验与实践建议

本节通过分层实验把前四节知识转化为可验证的操作能力，建议按“基础复现 -> 功能完善 -> 结构优化”的顺序完成。

### 5.1 实验 1：实现风险评级程序并输出评级说明
- 任务内容：实现风险评级程序并输出评级说明。
- 最低要求：程序可独立运行，包含输入、处理、输出三个环节。
- 验收标准：提交运行结果与关键步骤说明，能够解释结果含义。

### 5.2 实验 2：实现按月迭代的贷款余额更新程序
- 任务内容：实现按月迭代的贷款余额更新程序。
- 最低要求：程序可独立运行，包含输入、处理、输出三个环节。
- 验收标准：提交运行结果与关键步骤说明，能够解释结果含义。

### 5.3 实验 3：完成贷款还款计划表（最少 12 期）并保存为文本或 CSV
- 任务内容：完成贷款还款计划表（最少 12 期）并保存为文本或 CSV。
- 最低要求：程序可独立运行，包含输入、处理、输出三个环节。
- 验收标准：提交运行结果与关键步骤说明，能够解释结果含义。

建议交付物：
- `risk_rule_checker.py`
- `loan_schedule_generator.py`

## 6. 本章小结与学习检查

本节用于回收本章知识与实践成果，确认读者是否具备进入下一章的先修能力。

### 6.1 核心概念回顾
- 回顾本章四个核心主题：条件语句与风险判断、循环结构与分期计算、嵌套结构与规则实现、案例：贷款还款计划表生成。
- 回顾从概念理解到程序实现、再到结果解释的完整学习路径。
- 强化“金融语义正确 + 代码实现正确”的双重标准。

### 6.2 学习检查清单
- 能否在不参考示例代码的情况下复现本章核心程序。
- 能否解释关键变量、核心公式和输出指标的业务含义。
- 能否对异常输入或边界情况给出合理处理。
- 进阶衔接：前置依赖：第2章表达式、输入输出与顺序结构。
- 进阶衔接：后续衔接：第4章将把本章循环中产生的数据组织为列表、字典等复合结构。

### 6.3 常见错误与纠正建议
- 学生常见问题是“代码能跑但业务规则错误”，应强调样例验证。
- 建议用 2-3 组手工可验证数据做对拍检查。
- 建议每次实验都保留输入参数与输出结果，形成可追溯记录。
- 建议在提交前进行一次“结果复核 + 解释复核”的双重检查。


