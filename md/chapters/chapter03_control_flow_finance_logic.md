# 第3章 程序控制结构与金融逻辑（章节文档）

## 1. 章节定位

本章从“静态计算”升级到“可决策、可迭代计算”，让程序开始具备金融业务逻辑能力。

## 2. 目录结构

1. 条件语句（if）与风险判断
2. 循环结构（for / while）在分期计算中的应用
3. 嵌套结构与金融业务规则实现
4. 案例：贷款还款计划表生成
5. 本章小结与调试训练

## 3. 内容介绍

### 3.1 条件语句与风险判断
- 使用 `if/elif/else` 判断风险等级、信用评分区间、是否触发风控规则。
- 引入边界值思维，例如“等于临界值时如何处理”。
- 展示错误条件顺序导致的误判问题。

### 3.2 循环结构与分期计算
- 使用 `for` 进行定期迭代，如按月更新余额。
- 使用 `while` 处理“满足条件前持续计算”的场景。
- 说明无限循环风险与终止条件设计。

### 3.3 嵌套结构与规则实现
- 在循环中加入条件判断，实现“不同月份不同费率”的规则。
- 引入多条件组合逻辑（与、或、非）表达复杂业务约束。
- 强调规则可读性与注释规范。

### 3.4 案例：贷款还款计划表生成
- 输入贷款本金、年利率、期限、还款方式。
- 输出每期应还本金、利息、剩余本金。
- 对比“等额本息”和“等额本金”结构差异（可先实现一种，再扩展）。

## 4. 实验与实践建议

- 实验 1：实现风险评级程序并输出评级说明。
- 实验 2：实现按月迭代的贷款余额更新程序。
- 实验 3：完成贷款还款计划表（最少 12 期）并保存为文本或 CSV。

## 5. 本章交付物

- `risk_rule_checker.py`
- `loan_schedule_generator.py`

## 6. 与前后章节衔接

- 前置依赖：第2章表达式、输入输出与顺序结构。
- 后续衔接：第4章将把本章循环中产生的数据组织为列表、字典等复合结构。

## 7. 教学提示

- 学生常见问题是“代码能跑但业务规则错误”，应强调样例验证。
- 建议用 2-3 组手工可验证数据做对拍检查。
