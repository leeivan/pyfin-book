# 第6章 文件操作与金融数据读写（章节文档）

## 1. 章节定位

本章建立“程序与真实数据文件”之间的连接，形成基础数据工程能力。

## 2. 目录结构

1. 文本文件与 CSV 文件操作
2. 金融数据文件的读取与保存
3. 简单数据清洗与预处理
4. 案例：历史交易数据导入分析
5. 本章小结与数据质量检查

## 3. 内容介绍

### 3.1 文本文件与 CSV 文件操作
- 讲解文件路径、编码、读写模式。
- 对比文本与 CSV 在结构化存储中的差异。
- 强调数据读写中的异常处理与资源释放。

### 3.2 读取与保存
- 读取交易记录、价格数据、持仓数据等典型文件。
- 输出处理后的结果文件，并记录处理时间与版本信息。
- 形成“原始数据不覆盖”的基本规范。

### 3.3 数据清洗与预处理
- 处理缺失值、重复记录、异常格式。
- 统一日期格式、金额格式、资产代码格式。
- 说明“清洗规则透明化”在金融业务审计中的意义。

### 3.4 案例：历史交易数据导入分析
- 读取历史交易 CSV。
- 完成基础清洗并计算按资产聚合的交易统计。
- 输出可供下一章建模或可视化使用的数据。

## 4. 实验与实践建议

- 实验 1：实现 CSV 读取和字段校验。
- 实验 2：编写清洗脚本并生成清洗日志。
- 实验 3：导入历史交易数据后输出资产维度统计报表。

## 5. 本章交付物

- `transaction_data_loader.py`
- `data_cleaning_pipeline.py`
- `cleaned_transactions.csv`

## 6. 与前后章节衔接

- 前置依赖：第5章函数封装与模块组织。
- 后续衔接：第8章将直接基于清洗后的数据使用 Pandas/Matplotlib 做分析与可视化。

## 7. 教学提示

- 本章应强调“数据质量决定分析上限”。
- 建议把清洗前后样本做并排展示，强化数据治理意识。
