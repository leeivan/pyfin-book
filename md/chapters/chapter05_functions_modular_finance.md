# 第5章 函数与模块化金融程序设计（章节文档）

## 1. 章节定位

本章将“脚本堆叠”升级为“可复用模块”，建立工程化组织代码的基础能力。

## 2. 目录结构

1. 函数定义与参数传递
2. 金融计算函数封装（利率、现值、终值）
3. 模块与包的使用
4. 案例：金融计算工具库设计
5. 本章小结与复用性评估

## 3. 内容介绍

### 3.1 函数定义与参数传递
- 讲解位置参数、默认参数、返回值设计。
- 强调函数职责单一与命名表达业务语义。
- 通过输入校验提升函数健壮性。

### 3.2 金融计算函数封装
- 封装终值、现值、年化收益率等函数。
- 讨论参数单位统一（年/月、百分比/小数）问题。
- 通过文档字符串明确公式与参数约定。

### 3.3 模块与包
- 演示 `import`、模块拆分、目录组织。
- 介绍 `__init__.py` 的基础作用和接口暴露方式。
- 说明“主程序与工具模块分离”的维护价值。

### 3.4 案例：金融计算工具库设计
- 构建 `finance_utils` 包并实现核心函数。
- 编写示例调用脚本验证可复用性。
- 预留后续章节可扩展接口（风险指标、回测函数）。

## 4. 实验与实践建议

- 实验 1：把第2-4章脚本中的重复计算提炼成函数。
- 实验 2：构建 `finance_utils` 并写最少 5 个函数。
- 实验 3：为每个函数补充输入异常处理与说明文档。

## 5. 本章交付物

- `finance_utils/`（含核心金融计算函数）
- `finance_utils_demo.py`

## 6. 与前后章节衔接

- 前置依赖：第4章数据结构组织方式。
- 后续衔接：第6章将把函数与文件操作结合，形成“读入-处理-写出”流程。

## 7. 教学提示

- 本章评价标准应从“能算”提升到“可复用、可读、可维护”。
- 建议引入简单单元测试思想，但不强制完整测试框架。
